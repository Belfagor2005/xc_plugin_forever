#!/bin/sh
set -e  # Exit on any error

LOG_FILE="/var/log/xcplugin_install.log"
PLUGIN_PATH="/usr/lib/enigma2/python/Plugins/Extensions/XCplugin"

echo "--- PreInst * IPK Scripting v1.0 - $(date) ---" | tee -a "$LOG_FILE"

if [ -d "$PLUGIN_PATH" ]; then
    echo "Removing old XCplugin files..." | tee -a "$LOG_FILE"
    rm -rf "${PLUGIN_PATH:?}/"*  # :? prevents accidental deletion of root
    echo "Cleanup completed" | tee -a "$LOG_FILE"
else
    echo "No existing XCplugin found" | tee -a "$LOG_FILE"
fi

exit 0